<!-- Anas El Hayani -->

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>students</title>
</head>
<body style='margin-left: 30px;'>
  <h1>Exam Scores</h1>
  <p>CIT5 and Business students: Exam Scores</p>

  <button id='cit-btn'>CIT5 Majors</button>
  <button id='bus-btn'>Business Majors</button>

  <div id="result"></div>

  <script>

    document.addEventListener('DOMContentLoaded', function() {

      var data;

      document.querySelector('#cit-btn').onclick = function(){
        fetch('cit5students.json').then(response => {
          if(response.ok) {
            response.json().then(json => {
              data = json.filter(obj => obj.major === 'CIT5');
              displayData(data);
            });
          } else {
            document.querySelector('#result').innerHTML = "Data not found";
          }
        });
      };

      document.querySelector('#bus-btn').onclick = function(){
        fetch('cit5students.json').then(response => {
          if(response.ok) {
            response.json().then(json => {
              data = json.filter(obj => obj.major === 'BUSINESS');
              displayData(data);
            });
          } else {
            document.querySelector('#result').innerHTML = "Data not found";
          }
        });
      };

      function displayData(data) {
        var tableContents = "<table cellspacing='5'>";
        tableContents += "<tr><td>Name</td><td>Midterm</td><td>Final</td></tr>";
        for(var i = 0; i < data.length; i++) {
          tableContents += `<tr><td>${data[i].name}</td>
                             <td>${data[i].midterm}</td>
                             <td>${data[i].final}</td></tr>`;
        }
        tableContents += "</table>";
        document.querySelector('#result').innerHTML = tableContents;
      }

    });
  </script>
</body>
</html>

